import{c as l,r as c,b as i,j as e,S as g,R as N}from"./browser-polyfill.js";/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],w=l("Bookmark",v);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],P=l("FolderPlus",C);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],S=l("LogIn",A);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],L=l("LogOut",_);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],M=l("Tag",z),T=()=>{var x;const[d,u]=c.useState({isAuthenticated:!1}),[a,r]=c.useState({type:"quick",destination:"new",tags:[],isProcessing:!1}),[n,m]=c.useState(null);c.useEffect(()=>{chrome.tabs.query({active:!0,currentWindow:!0},t=>{t[0]&&m(t[0])}),h()},[]);const h=async()=>{var t;try{const s=await i.storage.local.get(["pulseAuth"]);(t=s.pulseAuth)!=null&&t.token&&u({isAuthenticated:!0,user:s.pulseAuth.user,workspace:s.pulseAuth.workspace})}catch(s){console.error("Auth check failed:",s)}},p=async()=>{try{await i.runtime.openOptionsPage()}catch(t){console.error("Login failed:",t)}},b=async()=>{await i.storage.local.remove(["pulseAuth"]),u({isAuthenticated:!1})},y=async()=>{if(!(!d.isAuthenticated||!n)){r(t=>({...t,isProcessing:!0}));try{await i.runtime.sendMessage({action:"capture",data:{url:n.url,title:n.title,type:a.type,destination:a.destination,selectedNote:a.selectedNote,tags:a.tags}}),window.close()}catch(t){console.error("Capture failed:",t),r(s=>({...s,isProcessing:!1}))}}},j=t=>{t&&!a.tags.includes(t)&&r(s=>({...s,tags:[...s.tags,t]}))},k=t=>{r(s=>({...s,tags:s.tags.filter(o=>o!==t)}))};return d.isAuthenticated?e.jsxs("div",{className:"p-4 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-semibold text-gray-900",children:"Pulse Clipper"}),e.jsx("p",{className:"text-xs text-gray-600",children:(x=d.workspace)==null?void 0:x.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>i.runtime.openOptionsPage(),className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(g,{size:16})}),e.jsx("button",{onClick:b,className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(L,{size:16})})]})]}),n&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:n.title||"Untitled"}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:n.url})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"Capture Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-1",children:[{value:"quick",label:"Quick",icon:w},{value:"selection",label:"Selection",icon:P},{value:"screenshot",label:"Screenshot",icon:M}].map(({value:t,label:s,icon:o})=>e.jsxs("button",{onClick:()=>r(f=>({...f,type:t})),className:`p-2 text-xs rounded-md border transition-colors ${a.type===t?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(o,{size:14,className:"mx-auto mb-1"}),s]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"Destination"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:[{value:"new",label:"New Note"},{value:"existing",label:"Existing Note"}].map(({value:t,label:s})=>e.jsx("button",{onClick:()=>r(o=>({...o,destination:t})),className:`p-2 text-xs rounded-md border transition-colors ${a.destination===t?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:s},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-700 block mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:a.tags.map(t=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-md",children:[t,e.jsx("button",{onClick:()=>k(t),className:"hover:text-blue-900",children:"Ã—"})]},t))}),e.jsx("input",{type:"text",placeholder:"Add tags...",className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyPress:t=>{if(t.key==="Enter"){const s=t.target;j(s.value.trim()),s.value=""}}})]}),e.jsx("button",{onClick:y,disabled:a.isProcessing,className:`w-full py-3 px-4 rounded-md font-medium text-sm transition-colors ${a.isProcessing?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:a.isProcessing?"Capturing...":"Capture to Pulse"})]})]}):e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Pulse Web Clipper"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Sign in to start clipping web content to your Pulse workspace"})]}),e.jsxs("button",{onClick:p,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(S,{size:16}),"Sign In"]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:()=>i.runtime.openOptionsPage(),className:"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700",children:[e.jsx(g,{size:14}),"Settings"]})})]})},$=N.createRoot(document.getElementById("root"));$.render(e.jsx(T,{}));
