import{c as i,r as l,b as n,j as e,S as j,R as N}from"./browser-polyfill.js";/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],k=i("Check",v);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],A=i("Globe",w);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],U=i("Key",P);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],S=i("User",C);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_=i("X",L),I=()=>{const[r,u]=l.useState({isAuthenticated:!1,apiUrl:"http://localhost:3000"}),[c,m]=l.useState(""),[o,h]=l.useState(""),[x,p]=l.useState(!1),[d,s]=l.useState(null);l.useEffect(()=>{g()},[]);const g=async()=>{var t;try{const a=await n.storage.local.get(["pulseAuth","pulseApiUrl"]);(t=a.pulseAuth)!=null&&t.token&&u({isAuthenticated:!0,user:a.pulseAuth.user,workspace:a.pulseAuth.workspace,apiUrl:a.pulseApiUrl||"http://localhost:3000"}),h(a.pulseApiUrl||"http://localhost:3000")}catch(a){console.error("Failed to load settings:",a)}},y=async()=>{if(!c.trim()){s({type:"error",text:"Please enter a valid API token"});return}p(!0),s(null);try{await n.runtime.sendMessage({action:"auth",data:{type:"pat",token:c.trim(),apiUrl:o}}),await n.storage.local.set({pulseApiUrl:o}),await g(),m(""),s({type:"success",text:"Successfully authenticated!"})}catch(t){console.error("PAT authentication failed:",t),s({type:"error",text:t instanceof Error?t.message:"Authentication failed"})}finally{p(!1)}},b=async()=>{try{await n.runtime.sendMessage({action:"auth",data:{type:"logout"}}),u({isAuthenticated:!1,apiUrl:o}),s({type:"success",text:"Successfully logged out"})}catch(t){console.error("Logout failed:",t),s({type:"error",text:"Logout failed"})}},f=async()=>{try{await n.storage.local.set({pulseApiUrl:o}),u(t=>({...t,apiUrl:o})),s({type:"success",text:"API URL saved"})}catch(t){console.error("Failed to save API URL:",t),s({type:"error",text:"Failed to save API URL"})}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsxs("h1",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(j,{size:24,className:"text-blue-600"}),"Pulse Web Clipper Settings"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure your connection to Pulse"})]}),e.jsxs("div",{className:"px-6 py-6",children:[d&&e.jsxs("div",{className:`mb-6 p-4 rounded-md flex items-center gap-2 ${d.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[d.type==="success"?e.jsx(k,{size:16}):e.jsx(_,{size:16}),d.text]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(A,{size:20}),"Pulse API URL"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Base URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"url",value:o,onChange:t=>h(t.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"http://localhost:3000"}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Save"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use http://localhost:3000 for development or your Pulse instance URL"})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(S,{size:20}),"Authentication Status"]}),r.isAuthenticated?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"✓ Connected to Pulse"}),r.user&&e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Signed in as ",r.user.name," (",r.user.email,")"]}),r.workspace&&e.jsxs("p",{className:"text-sm text-green-600",children:["Workspace: ",r.workspace.name]})]}),e.jsx("button",{onClick:b,className:"px-3 py-1 text-sm text-red-600 hover:text-red-800 border border-red-300 rounded-md hover:bg-red-50",children:"Disconnect"})]})}):e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"⚠ Not connected to Pulse"}),e.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"Please authenticate below to start clipping content"})]})]}),!r.isAuthenticated&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(U,{size:20}),"Personal Access Token"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Token"}),e.jsx("input",{type:"password",value:c,onChange:t=>m(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"pk_live_..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Generate a Personal Access Token from your Pulse account settings"})]}),e.jsx("button",{onClick:y,disabled:x||!c.trim(),className:`w-full py-2 px-4 rounded-md font-medium ${x||!c.trim()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}`,children:x?"Connecting...":"Connect to Pulse"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"How to Use"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("ol",{className:"text-sm text-blue-800 space-y-2",children:[e.jsx("li",{children:"1. Generate a Personal Access Token in your Pulse account settings"}),e.jsx("li",{children:'2. Enter the token above and click "Connect to Pulse"'}),e.jsx("li",{children:"3. Navigate to any webpage you want to clip"}),e.jsx("li",{children:"4. Click the Pulse extension icon or use the context menu"}),e.jsx("li",{children:"5. Choose your capture options and destination"}),e.jsx("li",{children:'6. Click "Capture to Pulse" to save the content'})]})})]})]})]})})})},R=N.createRoot(document.getElementById("root"));R.render(e.jsx(I,{}));
